\documentclass{article}

\usepackage{hyperref}
\usepackage[hmargin=2.5cm,vmargin=3.5cm]{geometry}

%MATH
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
%\usepackage{equation}{section} %Resets equation numbering within each section
\usepackage{esint}
\usepackage{multirow}
\usepackage{bigdelim}
\usepackage{cancel}

%LANGUAGE
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage[swedish, english]{babel} %Last language chosen as active

%PROGRAMMING
\usepackage{listings} % Allows to input code with the command \lstinputlisting{helloworld.c}
%Also use \lstset{language=C, numbers=left, breaklines=true} to highlight C keywords, show line numbers on the left and to automatically break lines that are too long (still keeps numbering correct).

%BIBLIOGRAPHY AND NOTES
\usepackage{endnotes}
%\usepackage{harvard}
\usepackage{cite}

%To enter bibliography, do
%\clearpage
%\bibliography{BibName.bib}

%\cite{ref} for citations

%\usepackage{pdfpages} %To insert external pdfs

\begin{document}
\title{Modeling of current-reinforced random walks}
\author{David J\"{a}derberg, Kristoffer Jonsson}
\maketitle

The computation of a single time step in the algorithm can be divided into two parts, the first of which is preparation and the second part is confirmation, which moves the particles between nodes. An overview of the tasks of each part can be seen below.

\begin{itemize}
\item Preparation
	\begin{itemize}
		\item Update mean flow
		\item Randomize flow
	\end{itemize}
\item Confirmation
	\begin{itemize}
		\item Update capacitance
		\item Update Conductivity
		\item Update number of particles
		\item Update potential
	\end{itemize}
\end{itemize}

\section{Preparation}
The preparation begins with each node calculating the mean flow to each of its neighbors as
\begin{equation}
\bar{I}_{ij} = \frac{(N_i - N_j)D_{ij}}{l_{ij}},
\end{equation}
from which it can be seen that the mean flow depends on the conductivity of each edge, $D_{ij}$, which is initialized and kept at or above some minimal value.
The actual flow can along the edge $ij$ can then be found as
\begin{equation}
I_{ij} = \text{Poi}(|\bar{I}_{ij}|\Delta t).
\end{equation}
In terms of implementation, it is important that both nodes that are connected to each edge agree on the same number. This is ensured by allowing only the node with a larger number of particles to randomize the value and then both nodes use that value when updating the number of particles. This work is done at the node with the largest number of particles, since it is also important to ensure that there are never fewer than zero particles at a node and the number of particles will be decreasing at the node with the largest number of particles. When a node has a smaller number of particles, it always calculates the flow as zero. After all nodes have calculated and stored $\bar{I}$ and $I$, the preparation step is finished.

\section{Confirmation}
 At the beginning of the confirmation part, all the data regarding how many particles will move along each edge is available. And so each node begins by updating the number of particles that is has as
 \begin{equation}
 N_i(t + \Delta t) = N_i(t) + \sum_{j \in \text{Neighbors}(i)} \left( I_{ji} - I_{ij} \right)
 \end{equation}
 The flow should theoretically be symmetric, but since only one particle has randomized a value, and the other has set it to zero, the flow is not symmetric in this implementation.
 
 \ \\
 
 After that, the final part of the step begins, in which several parameters that are relevant to the algorithm are updated. First is the the conductivity, which can is calculated as
\begin{equation}
D_{ij}(t + \Delta t) = D_{ij}(t) + q|\bar{I}|^\mu - \lambda D_{ij}(t)\Delta t
\end{equation}
Next to be calculated is the capacitance, which is calculated as 
 \begin{equation}
 C_i = \sum_{j \in \text{Neighbors}(i)} D_{ij}
 \end{equation}
 and finally the potential is calculated as
 \begin{equation}
 P_i = \frac{N_i}{C_i}.
 \end{equation}










\end{document}







